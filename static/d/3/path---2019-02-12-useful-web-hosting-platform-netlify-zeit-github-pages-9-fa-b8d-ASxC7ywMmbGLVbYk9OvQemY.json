{"data":{"content":{"edges":[{"node":{"id":"76356403-fc86-54b5-9d4d-1210bb0920d6","html":"<h2 id=\"前言\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"前言 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前言</h2>\n<p>對於代碼裡面的 if else，我們可以使用邏輯判斷式，或更好的三元判斷式來優化代碼。除了可以降低維護項目的成本之外，還可以提升代碼可讀性。就讓我們從最簡單的 if else 例子開始吧。</p>\n<p>最簡單的 <code class=\"language-text\">if...else...</code> 或者 <code class=\"language-text\">switch</code> 都是 JavaScript 的入門，我們這裡就簡單說一下：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>workIsDone <span class=\"token operator\">===</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">eatDinner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">keepCoding</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"表達式與陳述句\"><a href=\"#%E8%A1%A8%E9%81%94%E5%BC%8F%E8%88%87%E9%99%B3%E8%BF%B0%E5%8F%A5\" aria-label=\"表達式與陳述句 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>表達式與陳述句</h2>\n<p>首先我們要了解什麼是表達式（Expressions），什麼是陳述句（Statements）。</p>\n<blockquote>\n<p>表達式是任何句子用來給 JavaScript 引擎展開，並產生值。</p>\n</blockquote>\n<p>例如，它可以是一個數字，數組，對象，正則表達式，賦值，函數。</p>\n<blockquote>\n<p>陳述句這是任何句子用來給 JavaScript 引擎讓某些事物發生，或者由副作用。</p>\n</blockquote>\n<p>例如：條件命令式，變量，循環，返回，<code class=\"language-text\">try/catch/finally</code>。</p>\n<h2 id=\"條件和真假值\"><a href=\"#%E6%A2%9D%E4%BB%B6%E5%92%8C%E7%9C%9F%E5%81%87%E5%80%BC\" aria-label=\"條件和真假值 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>條件和真假值</h2>\n<p>何為真？何為假？萬物有所變，但 JavaScript 引擎卻有所定義。</p>\n<h3 id=\"假\"><a href=\"#%E5%81%87\" aria-label=\"假 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>假</h3>\n<p>我們可以簡單地用 <code class=\"language-text\">A == false</code> 來判斷假的值。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token string\">''</span> 或 <span class=\"token string\">\"\"</span> 或 <span class=\"token template-string\"><span class=\"token string\">``</span></span>\n<span class=\"token number\">0</span> 或 <span class=\"token operator\">-</span><span class=\"token number\">0</span>\n<span class=\"token keyword\">null</span>\n<span class=\"token keyword\">undefined</span>\n<span class=\"token number\">NaN</span>\n<span class=\"token boolean\">false</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>值得注意的是，使用模板字符串而裡面沒有填充任何值的話，也是會返回 <code class=\"language-text\">false</code> 的。</p>\n<h3 id=\"真\"><a href=\"#%E7%9C%9F\" aria-label=\"真 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>真</h3>\n<p>非假為真</p>\n<h2 id=\"如何優雅地寫出條件判斷式\"><a href=\"#%E5%A6%82%E4%BD%95%E5%84%AA%E9%9B%85%E5%9C%B0%E5%AF%AB%E5%87%BA%E6%A2%9D%E4%BB%B6%E5%88%A4%E6%96%B7%E5%BC%8F\" aria-label=\"如何優雅地寫出條件判斷式 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>如何優雅地寫出條件判斷式</h2>\n<p>還記得 <code class=\"language-text\">De Morgan&#39;s Laws</code> 嗎？</p>\n<p>我們可以用它來簡化複雜的條件判斷式：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token constant\">A</span> <span class=\"token operator\">||</span> <span class=\"token constant\">B</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token constant\">A</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token constant\">B</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span>\n<span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token constant\">A</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token constant\">B</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token constant\">A</span> <span class=\"token operator\">||</span> <span class=\"token operator\">!</span><span class=\"token constant\">B</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// true</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"實戰部分\"><a href=\"#%E5%AF%A6%E6%88%B0%E9%83%A8%E5%88%86\" aria-label=\"實戰部分 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>實戰部分</h3>\n<p>對於 Google Analytics（GA)，我們不希望把作者本人的數據，以及測試環境的數據也上傳上去，以免干擾資料正確性。我們就可以問用戶是否已經作者本人，以及是否在測試環境上，來判斷是否需要寄送 Google Analytics 數據到 Google 服務器上。</p>\n<p>假設兩個函數已經寫好了，比如說 <code class=\"language-text\">isAuthor()</code> 和 <code class=\"language-text\">isTestingEnvironment()</code>。</p>\n<p>只有在不是作者本人，<code class=\"language-text\">或者</code>當前環境不是測試環境，我們才寄送數據到 Google 服務器上。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> enableGA <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token function\">isAuthor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token function\">isTestingEnvironment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> betterEnableGA <span class=\"token operator\">=</span> <span class=\"token operator\">!</span><span class=\"token function\">isAuthor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span><span class=\"token function\">isTestingEnvironment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>當然，更加好的寫法是只有當用戶不是作者本人，<code class=\"language-text\">以及</code>不在測試環境上，我們才寄送數據到 Google 服務器上。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> enableGA <span class=\"token operator\">=</span> <span class=\"token function\">isNotAuthor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">isNotTestingEnvironment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<hr>\n<h2 id=\"優化-if-else-的不同手段\"><a href=\"#%E5%84%AA%E5%8C%96-if-else-%E7%9A%84%E4%B8%8D%E5%90%8C%E6%89%8B%E6%AE%B5\" aria-label=\"優化 if else 的不同手段 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>優化 if else 的不同手段</h2>\n<h3 id=\"以--取代單純的-if-語句\"><a href=\"#%E4%BB%A5--%E5%8F%96%E4%BB%A3%E5%96%AE%E7%B4%94%E7%9A%84-if-%E8%AA%9E%E5%8F%A5\" aria-label=\"以  取代單純的 if 語句 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>以 &#x26;&#x26; 取代單純的 if 語句</h3>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user <span class=\"token operator\">&amp;&amp;</span> user<span class=\"token punctuation\">.</span>canDeletePost<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">deletePost</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>以上的代碼可以取代為：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">user <span class=\"token operator\">&amp;&amp;</span> user<span class=\"token punctuation\">.</span>canDeletePost <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">deletePost</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>當然，如果你認為這樣寫的代碼太長，會有副作用，那麼你可以簡化為：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> userCanDeletePost <span class=\"token operator\">=</span> user <span class=\"token operator\">&amp;&amp;</span> user<span class=\"token punctuation\">.</span>canDeletePost<span class=\"token punctuation\">;</span>\nuserCanDeletePost <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">deletePost</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3 id=\"以--取代-if-else-語句\"><a href=\"#%E4%BB%A5--%E5%8F%96%E4%BB%A3-if-else-%E8%AA%9E%E5%8F%A5\" aria-label=\"以  取代 if else 語句 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>以 || 取代 if else 語句</h3>\n<p>我們這裡會用一個判斷用戶密碼長度的簡單函數作為例子。如果你有更加好的代碼片段，歡迎在底部的評論區留言。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> strength <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  strength <span class=\"token operator\">=</span> <span class=\"token string\">'Strong'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  strength <span class=\"token operator\">=</span> <span class=\"token string\">'Weak'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>以上的代碼可以取代為：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> strength <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">'Strong'</span> <span class=\"token operator\">||</span> <span class=\"token string\">'Weak'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>然而，使用 <code class=\"language-text\">&amp;&amp;</code> 加 <code class=\"language-text\">||</code> 的組合會增加程序員閱讀代碼的思維層數，一種更加好的做法是使用三元運算符（ternary operator)。</p>\n<p>值得注意的是，如果你的 <code class=\"language-text\">&amp;&amp;</code> 之後 的 A 是一個 falsy 的值，它<strong>永遠不會返回，而是返回 B。</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">condition <span class=\"token operator\">&amp;&amp;</span> <span class=\"token constant\">A</span> <span class=\"token operator\">||</span> <span class=\"token constant\">B</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 例如：</span>\n<span class=\"token keyword\">let</span> password <span class=\"token operator\">=</span> <span class=\"token string\">'abcdefg1234'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token boolean\">false</span> <span class=\"token operator\">||</span> <span class=\"token string\">'Weak'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'Weak'</span>\n\npassword <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token boolean\">false</span> <span class=\"token operator\">||</span> <span class=\"token string\">'Weak'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 'Weak'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我們可以使用三元運算符而不是邏輯運算符來更好地表達語句。</p>\n<h3 id=\"三元運算符\"><a href=\"#%E4%B8%89%E5%85%83%E9%81%8B%E7%AE%97%E7%AC%A6\" aria-label=\"三元運算符 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>三元運算符</h3>\n<p>最簡單的三元運算符會是，條件為真？返回 A，不然返回 B。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">condition ? A : B;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>針對以上的例子，判斷密碼長度的代碼片段可以改為：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> strength <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token string\">'Strong'</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'Weak'</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>另外一個例子，就是在支持多瀏覽器的 AJAX 庫裡面可以得出的代碼片段：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> xmlhttp <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>XMLHttpRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 現代瀏覽器</span>\n  xmlhttp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>ActiveXObject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 舊 IE 版本 (IE &lt;= 6)</span>\n  xmlhttp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ActiveXObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Microsoft.XMLHTTP'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>我們可以使用邏輯運算符來優化以上代碼片段：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> xmlhttp <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>XMLHttpRequest <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>ActiveXObject <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ActiveXObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Microsoft.XMLHTTP'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">||</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>或使用更加好的三元運算符來優化以上代碼片段：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> xmlhttp <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>XMLHttpRequest\n  <span class=\"token operator\">?</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">:</span> window<span class=\"token punctuation\">.</span>ActiveXObject\n    <span class=\"token operator\">?</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ActiveXObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Microsoft.XMLHTTP'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>值得注意的是，三元判斷式是<em>從右到左</em>結合的：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// 這個判斷式</span>\n<span class=\"token constant\">A</span> <span class=\"token operator\">?</span> <span class=\"token constant\">B</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">C</span> <span class=\"token operator\">?</span> <span class=\"token constant\">D</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">E</span> <span class=\"token operator\">?</span> <span class=\"token constant\">F</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">G</span>\n\n<span class=\"token comment\">// 等同以下判斷式</span>\n<span class=\"token punctuation\">(</span><span class=\"token constant\">A</span> <span class=\"token operator\">?</span> <span class=\"token constant\">B</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">C</span> <span class=\"token operator\">?</span> <span class=\"token constant\">D</span> <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">E</span> <span class=\"token operator\">?</span> <span class=\"token constant\">F</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">G</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// B</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>然而，你可能是想寫：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token constant\">A</span> <span class=\"token operator\">?</span> <span class=\"token constant\">B</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">C</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token constant\">D</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">E</span> <span class=\"token punctuation\">)</span><span class=\"token operator\">?</span> <span class=\"token constant\">F</span> <span class=\"token punctuation\">:</span> <span class=\"token constant\">G</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// F</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>所以，記得自己加括號來控制代碼如何結合解析。</p>\n<h2 id=\"後記\"><a href=\"#%E5%BE%8C%E8%A8%98\" aria-label=\"後記 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>後記</h2>\n<p>上個星期，組織舉辦了一場前端 Code Review 的大會，其中優化 <code class=\"language-text\">if...else...</code> 的手法，讓我有所體悟。之後，我花了點時間研究邏輯判斷式及三元判斷式。希望能夠達到知其然，知其所以然的階段。</p>\n<p>對於第一段代碼，我們可以簡化為以下代碼：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">workIsDone <span class=\"token operator\">?</span> <span class=\"token function\">eatDinner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token function\">keepCoding</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>順帶一提，不知道為什麼這一篇文章的底部評論區有問題，請移玉步到右上角的留言簿。。。</p>\n<h2 id=\"參考資料\"><a href=\"#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99\" aria-label=\"參考資料 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>參考資料</h2>\n<ul>\n<li><a href=\"https://hackernoon.com/conditional-javascript-for-experts-d2aa456ef67c\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Conditional JavaScript for Experts - Hacker Noon</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/De_Morgan%27s_laws\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">De Morgan's laws - Wikipedia</a></li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E5%89%8D%E8%A8%80\">前言</a></li>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E8%A1%A8%E9%81%94%E5%BC%8F%E8%88%87%E9%99%B3%E8%BF%B0%E5%8F%A5\">表達式與陳述句</a></li>\n<li>\n<p><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E6%A2%9D%E4%BB%B6%E5%92%8C%E7%9C%9F%E5%81%87%E5%80%BC\">條件和真假值</a></p>\n<ul>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E5%81%87\">假</a></li>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E7%9C%9F\">真</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E5%A6%82%E4%BD%95%E5%84%AA%E9%9B%85%E5%9C%B0%E5%AF%AB%E5%87%BA%E6%A2%9D%E4%BB%B6%E5%88%A4%E6%96%B7%E5%BC%8F\">如何優雅地寫出條件判斷式</a></p>\n<ul>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E5%AF%A6%E6%88%B0%E9%83%A8%E5%88%86\">實戰部分</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E5%84%AA%E5%8C%96-if-else-%E7%9A%84%E4%B8%8D%E5%90%8C%E6%89%8B%E6%AE%B5\">優化 if else 的不同手段</a></p>\n<ul>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E4%BB%A5--%E5%8F%96%E4%BB%A3%E5%96%AE%E7%B4%94%E7%9A%84-if-%E8%AA%9E%E5%8F%A5\">以 &#x26;&#x26; 取代單純的 if 語句</a></li>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E4%BB%A5--%E5%8F%96%E4%BB%A3-if-else-%E8%AA%9E%E5%8F%A5\">以 || 取代 if else 語句</a></li>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E4%B8%89%E5%85%83%E9%81%8B%E7%AE%97%E7%AC%A6\">三元運算符</a></li>\n</ul>\n</li>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E5%BE%8C%E8%A8%98\">後記</a></li>\n<li><a href=\"/2018/10/22/javascript-if-else-in-depth/#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99\">參考資料</a></li>\n</ul>","excerpt":"前言對於代碼裡面的 if else，我們可以使用邏輯判斷式，或更好的三元判斷式來優化代碼。除了可以降低維護項目的成本之外，還可以提升代碼可讀性。就讓我們從最簡單的 if else 例子開始吧。最簡單的  或者  都是 JavaScript…","fields":{"slug":"/2018/10/22/javascript-if-else-in-depth/"},"frontmatter":{"id":"20181022a","title":"深入淺出代碼優化﹣if/else","slug":"/2018/10/22/javascript-if-else-in-depth/","date":"2018-10-22T03:48:03.125Z","headerImage":null}},"previous":null,"next":null}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"f63e4c29-a26b-552a-b2e5-65e692fc08bb","index":4}}