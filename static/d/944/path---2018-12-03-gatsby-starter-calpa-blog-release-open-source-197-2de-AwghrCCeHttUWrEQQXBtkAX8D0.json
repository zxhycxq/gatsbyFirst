{"data":{"content":{"edges":[{"node":{"id":"49c06e5c-0201-5e98-8632-9f7694d61260","html":"<h2 id=\"前言\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"前言 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>前言</h2>\n<p>這次 Google 開發者大會請來了 Lighthouse 的工程師 - Eric Bidelman ，分享如何簡單地使用 Lighthouse, Puppeteer 來自動化我們日常的流程。它是一個開源的自動化工具，用於改進網絡應用質量。您只需要提供網址，它就測試該頁面，並生成頁面性能報告。你可以看看採取哪些措施來改進您的應用。</p>\n<p><img src=\"https://i.imgur.com/ARyraks.jpg\" alt=\"Imgur\"></p>\n<p><img src=\"https://i.imgur.com/gHKHkks.jpg\" alt=\"Imgur\"></p>\n<p><img src=\"https://i.imgur.com/pXW7qgy.jpg\" alt=\"Imgur\"></p>\n<p>Lighthouse 重視用戶的首次加載頁面速度，頁面首次顯示內容速度，有意義的內容顯示速度，以及可以交互的時間。</p>\n<p><img src=\"https://i.imgur.com/J1Fgbxi.jpg\" alt=\"以用戶為中心的績效指標\"></p>\n<p>以一個頁面加載的周期為例，首先頁面會發送第一個字節給用戶，然後顯示一些非空白的圖像，然後顯示有意義的內容，然後展示所有內容，允許用戶點擊或其他操作，然後完結整個加載週期。</p>\n<p><img src=\"https://i.imgur.com/2mme4VN.jpg\" alt=\"頁面加載週期\"></p>\n<h2 id=\"使用方法\"><a href=\"#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95\" aria-label=\"使用方法 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用方法</h2>\n<p>運行 Lighthouse 的方式有兩種：作為 Chrome 擴展程序運行，或作為命令行工具運行。 Chrome 擴展程序提供了用戶友好的界面，方便讀取報告。而命令行工具允許您將 Lighthouse 集成到持續集成系統。</p>\n<h3 id=\"開發者工具\"><a href=\"#%E9%96%8B%E7%99%BC%E8%80%85%E5%B7%A5%E5%85%B7\" aria-label=\"開發者工具 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>開發者工具</h3>\n<p>你只需要打開 Chrome 的開發者工具，點擊 <code class=\"language-text\">Audits</code>，然後就可以看到 Lighthouse 界面：</p>\n<p><img src=\"https://i.imgur.com/DQwskEa.jpg\" alt=\"DevTools\"></p>\n<h3 id=\"擴展程序\"><a href=\"#%E6%93%B4%E5%B1%95%E7%A8%8B%E5%BA%8F\" aria-label=\"擴展程序 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>擴展程序</h3>\n<p>你可以到 <a href=\"https://chrome.google.com/webstore/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=en\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">chrome web store</a> 下載並安裝 Lighthouse Chrome 擴展程序。</p>\n<p><img src=\"https://i.imgur.com/KvuQ16h.jpg\" alt=\"Chrome Extension\"></p>\n<h3 id=\"命令行工具\"><a href=\"#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7\" aria-label=\"命令行工具 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>命令行工具</h3>\n<p>除了使用瀏覽器之外，你也可以使用命令行工具來調試你的網站。</p>\n<p><img src=\"https://i.imgur.com/X4fpanA.jpg\" alt=\"Node CLI\"></p>\n<p>需求：Node.js >= 5</p>\n<ol>\n<li>全局安裝 lighthouse</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">npm install -g lighthouse</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<ol>\n<li>然後輸入你的頁面</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">lighthouse https://example.com</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>lighthouse 會自動生成 HTML 報告，你也可以使用 JSON 格式。</p>\n<p><img src=\"https://i.imgur.com/X1lxLiL.jpg\" alt=\"Report\"></p>\n<h2 id=\"自動化部分\"><a href=\"#%E8%87%AA%E5%8B%95%E5%8C%96%E9%83%A8%E5%88%86\" aria-label=\"自動化部分 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自動化部分</h2>\n<p>你也可以利用 TravisCI 來自動分析改動後的代碼對於頁面性能的影響。</p>\n<p><img src=\"https://i.imgur.com/R0OKQAr.jpg\" alt=\"Github + Travis\"></p>\n<p><img src=\"https://i.imgur.com/RHvgA2y.png\" alt=\"結果\"></p>\n<p>你只需要在 <code class=\"language-text\">.travis.yml</code> 裡面加入以下代碼：</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"><code class=\"language-yml\"><span class=\"token key atrule\">language</span><span class=\"token punctuation\">:</span> node_js\n<span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> npm run lint\n  <span class=\"token punctuation\">-</span> npm run build\n<span class=\"token key atrule\">after_success</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> .\"./travis/deploy_pr_gae.sh\"\n  <span class=\"token punctuation\">-</span> export LH_MIN_PASS_SCORE=96\n  <span class=\"token punctuation\">-</span> export LH_TEST_URL=https<span class=\"token punctuation\">:</span>//your.staging.server.com/\n  <span class=\"token punctuation\">-</span> node travis/runlighthouse.js $LH_TEST_URL $LH_MIN_PASS_SCORE</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>更多詳情可以觀看講師在 Github 上面的分享：<a href=\"https://github.com/ebidel/lighthouse-ci\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ebidel/lighthouse-ci</a></p>\n<h2 id=\"puppeteer\"><a href=\"#puppeteer\" aria-label=\"puppeteer permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Puppeteer</h2>\n<p><img src=\"https://i.imgur.com/vwN5JcX.jpg\" alt=\"Puppeteer\"></p>\n<h3 id=\"底層\"><a href=\"#%E5%BA%95%E5%B1%A4\" aria-label=\"底層 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>底層</h3>\n<p>在談 Puppeteer 之前，我們需要提到上面是 <code class=\"language-text\">Headless Chrome</code>。簡單來說，它是一個沒有視圖層的谷歌瀏覽器。</p>\n<p><img src=\"https://i.imgur.com/ktY3lpv.jpg\" alt=\"Headless Chrome\"></p>\n<p>它允許你使用最新的瀏覽器來測試頁面，使用所有最新的屬性，比如說 CSS Grid 格局，Web 推送通知等。</p>\n<p>最重要的是，它暴露開發者工具的可編程接口，比如說網絡狀況，模擬設備，代碼覆蓋率。</p>\n<p><img src=\"https://i.imgur.com/vMo88ml.jpg\" alt=\"DevTools Protocol\"></p>\n<p>例如你可以打開一個 WebSocket，然後監聽瀏覽器發生了什麼操作，比如說 CSS 的 <code class=\"language-text\">getStyleSheetText</code>，DOM 的<code class=\"language-text\">markUndoableState</code>等。</p>\n<p>你也可以到官網閱讀更加豐富的文檔：<a href=\"https://chromedevtools.github.io/devtools-protocol/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://chromedevtools.github.io/devtools-protocol/</a></p>\n<h3 id=\"實戰部分\"><a href=\"#%E5%AF%A6%E6%88%B0%E9%83%A8%E5%88%86\" aria-label=\"實戰部分 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>實戰部分</h3>\n<p>大部分你手動在瀏覽器裡面做的事情，它都可以做到。例如：</p>\n<ol>\n<li>截圖並生成 PDF</li>\n<li>自動填寫表格，UI 測試，鍵盤輸入</li>\n<li>測試 Chrome 插件</li>\n</ol>\n<h3 id=\"安裝方法\"><a href=\"#%E5%AE%89%E8%A3%9D%E6%96%B9%E6%B3%95\" aria-label=\"安裝方法 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安裝方法</h3>\n<p><img src=\"https://i.imgur.com/XxzcQK9.jpg\" alt=\"Imgur\"></p>\n<p>它會下載最新版本的 Chromium，以及暴露封裝好的接口出來給開發者使用。</p>\n<p>值得注意的是，它的源碼有很多 <code class=\"language-text\">async/await</code> 的操作，你也可以這樣操作你的代碼。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">npm i puppeteer --save</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>講師也提供了很多例子，方便學習使用 Puppeteer。</p>\n<h3 id=\"截屏\"><a href=\"#%E6%88%AA%E5%B1%8F\" aria-label=\"截屏 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>截屏</h3>\n<p><img src=\"https://i.imgur.com/x5djmV4.jpg\" alt=\"PPTR 101: 截屏\"></p>\n<p>比如說我要把 <code class=\"language-text\">https://example.com</code> 頁面截圖，保存為 <code class=\"language-text\">example.png</code>。我只需要寫幾行代碼\n：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> puppeteer <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"puppeteer\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> browser <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> puppeteer<span class=\"token punctuation\">.</span><span class=\"token function\">launch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> page <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">newPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">goto</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://example.com\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">await</span> page<span class=\"token punctuation\">.</span><span class=\"token function\">screenshot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> path<span class=\"token punctuation\">:</span> <span class=\"token string\">\"example.png\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">await</span> browser<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"頁面數據\"><a href=\"#%E9%A0%81%E9%9D%A2%E6%95%B8%E6%93%9A\" aria-label=\"頁面數據 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>頁面數據</h3>\n<p>你只需要使用 <code class=\"language-text\">page.metrics()</code> 方法就可以了，它會返回一個頁面數據對象。</p>\n<p><img src=\"https://i.imgur.com/repZUj6.jpg\" alt=\"頁面數據\"></p>\n<h3 id=\"代碼覆蓋率\"><a href=\"#%E4%BB%A3%E7%A2%BC%E8%A6%86%E8%93%8B%E7%8E%87\" aria-label=\"代碼覆蓋率 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>代碼覆蓋率</h3>\n<p><img src=\"https://i.imgur.com/Orkl2hI.jpg\" alt=\"代碼覆蓋率\"></p>\n<p>你可以使用 <code class=\"language-text\">page.coverage</code> 裡面的方法 <code class=\"language-text\">startJSCoverage()</code>，<code class=\"language-text\">startCSSCoverage()</code> 來開始測試覆蓋率。以及使用 <code class=\"language-text\">stopJSCoverage()</code>, <code class=\"language-text\">stopCSSCoverage()</code> 來結束測試。</p>\n<h3 id=\"攔截網絡請求\"><a href=\"#%E6%94%94%E6%88%AA%E7%B6%B2%E7%B5%A1%E8%AB%8B%E6%B1%82\" aria-label=\"攔截網絡請求 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>攔截網絡請求</h3>\n<p><img src=\"https://i.imgur.com/npNy9qb.jpg\" alt=\"Youtube\"></p>\n<p>你可以攔截圖片的請求，甚至是把圖片的請求換成其他請求，例如 http 直接上 https，或圖片換成佔位圖。</p>\n<h3 id=\"生成報告\"><a href=\"#%E7%94%9F%E6%88%90%E5%A0%B1%E5%91%8A\" aria-label=\"生成報告 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>生成報告</h3>\n<p><img src=\"https://i.imgur.com/kmTHWVM.jpg\" alt=\"生成 PDFs\"></p>\n<p>你可以通過代碼生成 PDF，例如使用<code class=\"language-text\">page.pdf()</code> 方法。</p>\n<p>更多用法可以到官網查閱 <a href=\"https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#pagepdfoptions\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pdf 章節</a></p>\n<h2 id=\"pptraas\"><a href=\"#pptraas\" aria-label=\"pptraas permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PPTRAAS</h2>\n<p>以上這些個案都是一些重複出現的日常例子。 <a href=\"https://pptraas.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Puppeteer as a service</a> 就把以上這些代碼做了封裝，只需在 url 後續加入 <code class=\"language-text\">url</code> 參數，便可使用服務。</p>\n<p><img src=\"https://i.imgur.com/im579Z8.png\" alt=\"截圖\"></p>\n<p>例如你可以使用 <code class=\"language-text\">https://pptraas.com/screenshot?url=https://example.com/</code> 來截圖。</p>\n<p>更多例子可以到 <a href=\"https://pptraas.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Puppeteer as a service</a> 來使用服務。</p>\n<h2 id=\"其他優質的工具\"><a href=\"#%E5%85%B6%E4%BB%96%E5%84%AA%E8%B3%AA%E7%9A%84%E5%B7%A5%E5%85%B7\" aria-label=\"其他優質的工具 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>其他優質的工具</h2>\n<p><img src=\"https://i.imgur.com/Y0sXMNl.jpg\" alt=\"NDB\"></p>\n<p>Node Debugger 可以讓你打開瀏覽器裡面的開發者工具來調試 Node 程序。</p>\n<p><img src=\"https://i.imgur.com/w4mVEpe.jpg\" alt=\"Page Speed Insights\"></p>\n<p>Page Speed Insights 可以讓你透過谷歌的平台來測試裡的網站，並生成報告。</p>\n<h2 id=\"後記\"><a href=\"#%E5%BE%8C%E8%A8%98\" aria-label=\"後記 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>後記</h2>\n<p>這次可謂乾貨滿滿，收穫豐富。我之前以為這些工具過於專業，艱澀難懂，沒想到只需要按幾個按鈕，寫幾行代碼，甚至不需要寫代碼便可以測試自己的網站。</p>\n<p>就讓我好好地利用這些工具來優化我的<a href=\"https://calpa.me/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">個人博客</a>吧（笑</p>\n<h2 id=\"參考資料\"><a href=\"#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99\" aria-label=\"參考資料 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>參考資料</h2>\n<ol>\n<li><a href=\"https://github.com/ebidel/lighthouse-ci\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Github - ebidel/lighthouse-ci</a></li>\n<li><a href=\"https://github.com/GoogleChrome/lighthouse\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Github - GoogleChrome/lighthouse</a></li>\n<li><a href=\"https://pptraas.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Puppeteer as a service</a></li>\n<li><a href=\"https://developers.google.com/web/tools/lighthouse/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Tools for Web Developers - Lighthouse</a></li>\n</ol>\n<p>以下為掘金上面的谷歌開發者大會專欄（只有簡體）：</p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2018/9/23/166062d49459b3cd?w=1280&#x26;h=200&#x26;f=png&#x26;s=50510\"></p>\n<p><a href=\"https://juejin.im/e/gdd\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">閱讀更多 Google 開發者大會 2018 技術乾貨</a></p>","tableOfContents":"<ul>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E5%89%8D%E8%A8%80\">前言</a></li>\n<li>\n<p><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95\">使用方法</a></p>\n<ul>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E9%96%8B%E7%99%BC%E8%80%85%E5%B7%A5%E5%85%B7\">開發者工具</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E6%93%B4%E5%B1%95%E7%A8%8B%E5%BA%8F\">擴展程序</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7\">命令行工具</a></li>\n</ul>\n</li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E8%87%AA%E5%8B%95%E5%8C%96%E9%83%A8%E5%88%86\">自動化部分</a></li>\n<li>\n<p><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#puppeteer\">Puppeteer</a></p>\n<ul>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E5%BA%95%E5%B1%A4\">底層</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E5%AF%A6%E6%88%B0%E9%83%A8%E5%88%86\">實戰部分</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E5%AE%89%E8%A3%9D%E6%96%B9%E6%B3%95\">安裝方法</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E6%88%AA%E5%B1%8F\">截屏</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E9%A0%81%E9%9D%A2%E6%95%B8%E6%93%9A\">頁面數據</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E4%BB%A3%E7%A2%BC%E8%A6%86%E8%93%8B%E7%8E%87\">代碼覆蓋率</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E6%94%94%E6%88%AA%E7%B6%B2%E7%B5%A1%E8%AB%8B%E6%B1%82\">攔截網絡請求</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E7%94%9F%E6%88%90%E5%A0%B1%E5%91%8A\">生成報告</a></li>\n</ul>\n</li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#pptraas\">PPTRAAS</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E5%85%B6%E4%BB%96%E5%84%AA%E8%B3%AA%E7%9A%84%E5%B7%A5%E5%85%B7\">其他優質的工具</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E5%BE%8C%E8%A8%98\">後記</a></li>\n<li><a href=\"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99\">參考資料</a></li>\n</ul>","excerpt":"前言這次 Google 開發者大會請來了 Lighthouse 的工程師 - Eric Bidelman ，分享如何簡單地使用 Lighthouse, Puppeteer…","fields":{"slug":"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/"},"frontmatter":{"id":"20181022a","title":"網站性能調優開發工具: Lighthouse, Puppeteer 以及進階部分丨 Google 開發者大會 2018","slug":"/2018/09/24/tooling-for-web-lighthouse-puppeteer-and-beyond/","date":"2018-09-24T03:48:03.125Z","headerImage":null}},"previous":null,"next":null}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"d3271b19-9a93-5078-a403-f8111d645ef5","index":8}}